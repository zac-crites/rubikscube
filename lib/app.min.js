var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();define("cameraControls",["require","exports"],function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),define("turnable",["require","exports"],function(t,e){"use strict";var r;Object.defineProperty(e,"__esModule",{value:!0}),(r=e.Turn||(e.Turn={}))[r.X=0]="X",r[r.Y=1]="Y",r[r.Z=2]="Z",r[r.Xi=3]="Xi",r[r.Yi=4]="Yi",r[r.Zi=5]="Zi",r[r.X2=6]="X2",r[r.Y2=7]="Y2",r[r.Z2=8]="Z2",r[r.U=9]="U",r[r.D=10]="D",r[r.L=11]="L",r[r.R=12]="R",r[r.F=13]="F",r[r.B=14]="B",r[r.Ui=15]="Ui",r[r.Di=16]="Di",r[r.Li=17]="Li",r[r.Ri=18]="Ri",r[r.Fi=19]="Fi",r[r.Bi=20]="Bi",r[r.U2=21]="U2",r[r.D2=22]="D2",r[r.L2=23]="L2",r[r.R2=24]="R2",r[r.F2=25]="F2",r[r.B2=26]="B2",r[r.I=27]="I",r[r.Ii=28]="Ii",r[r.r=29]="r",r[r.ri=30]="ri";var n=function(){function t(t){this.target=t}return t.prototype.apply=function(t){return this.target.apply(t),this},t.prototype.waitForMoves=function(){return this.target.waitForMoves()},t}();e.TurnableWrapper=n}),define("cube",["require","exports","turnable"],function(t,e,r){"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0}),(n=e.Face||(e.Face={}))[n.U=0]="U",n[n.L=1]="L",n[n.F=2]="F",n[n.R=3]="R",n[n.B=4]="B",n[n.D=5]="D";var i=function(){function t(){this.faces=[],this.reset()}return t.prototype.reset=function(){this.faces=[];for(var t=0;t<6;t++)this.faces.push(this.faceData(t))},t.prototype.isSolved=function(){return this.faces.every(function(t){return t.facelets.every(function(e){return e===t.center})})},t.prototype.getFacelet=function(t,e){return void 0===e?this.faces[t].center:this.faces[t].facelets[e]},t.prototype.waitForMoves=function(){return Promise.resolve()},t.prototype.apply=function(t){if("number"!=typeof t){for(var e=0,n=t;e<n.length;e++){var i=n[e];this.apply(i)}return this}switch(t){case r.Turn.X:return this.X();case r.Turn.Y:return this.Y();case r.Turn.Z:return this.Z();case r.Turn.U:return this.U();case r.Turn.Xi:return this.apply([r.Turn.X,r.Turn.X,r.Turn.X]);case r.Turn.Yi:return this.apply([r.Turn.Y,r.Turn.Y,r.Turn.Y]);case r.Turn.Zi:return this.apply([r.Turn.Z,r.Turn.Z,r.Turn.Z]);case r.Turn.X2:return this.apply([r.Turn.X,r.Turn.X]);case r.Turn.Y2:return this.apply([r.Turn.Y,r.Turn.Y]);case r.Turn.Z2:return this.apply([r.Turn.Z,r.Turn.Z]);case r.Turn.D:return this.apply([r.Turn.X,r.Turn.F,r.Turn.Xi]);case r.Turn.L:return this.apply([r.Turn.Z,r.Turn.U,r.Turn.Zi]);case r.Turn.R:return this.apply([r.Turn.Zi,r.Turn.U,r.Turn.Z]);case r.Turn.F:return this.apply([r.Turn.X,r.Turn.U,r.Turn.Xi]);case r.Turn.B:return this.apply([r.Turn.Xi,r.Turn.U,r.Turn.X]);case r.Turn.Ui:return this.apply([r.Turn.U,r.Turn.U,r.Turn.U]);case r.Turn.Di:return this.apply([r.Turn.D2,r.Turn.D]);case r.Turn.Li:return this.apply([r.Turn.L2,r.Turn.L]);case r.Turn.Ri:return this.apply([r.Turn.R2,r.Turn.R]);case r.Turn.Fi:return this.apply([r.Turn.F2,r.Turn.F]);case r.Turn.Bi:return this.apply([r.Turn.B2,r.Turn.B]);case r.Turn.U2:return this.apply([r.Turn.U,r.Turn.U]);case r.Turn.D2:return this.apply([r.Turn.D,r.Turn.D]);case r.Turn.L2:return this.apply([r.Turn.L,r.Turn.L]);case r.Turn.R2:return this.apply([r.Turn.R,r.Turn.R]);case r.Turn.F2:return this.apply([r.Turn.F,r.Turn.F]);case r.Turn.B2:return this.apply([r.Turn.B,r.Turn.B]);case r.Turn.I:return this.apply([r.Turn.R,r.Turn.X]);case r.Turn.Ii:return this.apply([r.Turn.Ri,r.Turn.Xi]);case r.Turn.r:case r.Turn.ri:return this.apply([r.Turn.Li,r.Turn.Xi])}return this},t.prototype.X=function(){this.rotateFace(this.faces[1],1),this.rotateFace(this.faces[3],3);var t=this.faces[0];return this.faces[0]=this.faces[2],this.faces[2]=this.faces[5],this.faces[5]=this.faces[4],this.rotateFace(this.faces[5],2),this.faces[4]=t,this.rotateFace(this.faces[4],2),this},t.prototype.Y=function(){this.rotateFace(this.faces[0],3),this.rotateFace(this.faces[5],1);var t=this.faces[1];return this.faces[1]=this.faces[2],this.faces[2]=this.faces[3],this.faces[3]=this.faces[4],this.faces[4]=t,this},t.prototype.Z=function(){this.rotateFace(this.faces[2],3),this.rotateFace(this.faces[4],1);var t=this.faces[0];return this.faces[0]=this.faces[1],this.rotateFace(this.faces[0],3),this.faces[1]=this.faces[5],this.rotateFace(this.faces[1],3),this.faces[5]=this.faces[3],this.rotateFace(this.faces[5],3),this.faces[3]=t,this.rotateFace(this.faces[3],3),this},t.prototype.U=function(){return this.rotateFace(this.faces[0],3),this.shift(0),this.shift(1),this.shift(2),this},t.prototype.faceData=function(t){for(var e=[],r=0;r<8;r++)e.push(t);return{get center(){return t},get facelets(){return e}}},t.prototype.replace=function(t,e,r){var n=t.facelets[e];return t.facelets[e]=r,n},t.prototype.shift=function(t){var e=this.faces;this.replace(e[1],t,this.replace(e[2],t,this.replace(e[3],t,this.replace(e[4],t,e[1].facelets[t]))))},t.prototype.rotateFace=function(t,e){for(var r=0;r<2*e;r++)t.facelets.push(t.facelets.splice(0,1)[0])},t}();e.Cube=i}),define("replay",["require","exports","turnable"],function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t){this.moves=t||[]}return Object.defineProperty(t.prototype,"duration",{get:function(){var t=this.moves.reduce(function(t,e){return Math.max(t+133,e.timestamp+133)},0),e=this.moves.find(function(t){return t.timestamp>0&&t.turn>r.Turn.Z2});return t-(e?e.timestamp:0)},enumerable:!0,configurable:!0}),t}();e.Replay=n}),define("replayConverter",["require","exports","replay","turnable"],function(t,e,r,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(){this.timeResolution=150}return t.prototype.replayToString=function(t){for(var e=[],r=0,i=0,s=t.moves;i<s.length;i++){var o=s[i],a=o.turn<<3;if(o.timestamp>r){var u=o.timestamp-r,c=Math.floor(u/this.timeResolution);for(r+=c*this.timeResolution;c>=8;)e.push(n.Turn.ri+1<<3),c-=8;a+=c}e.push(a)}var p=0,h=new Uint8Array(e.length);return e.forEach(function(t){return h[p++]=t}),btoa(String.fromCharCode.apply(null,h))},t.prototype.stringToReplay=function(t){var e=[],i=atob(t),s=this.timeResolution,o=0;return Array.prototype.forEach.call(i,function(t){var r=t.charCodeAt(0)>>3,i=t.charCodeAt(0)%8;o+=s*i,r>n.Turn.ri?o+=8*s:e.push({timestamp:o,turn:r})}),new r.Replay(e)},t}();e.ReplayConverter=i}),define("currentReplayProvider",["require","exports","replay","replayConverter"],function(t,e,r,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(){if(this.currentReplay=null,this.replayLog=[],this.replayConverter=new n.ReplayConverter,null!==localStorage.replayLog){var t=JSON.parse(localStorage.replayLog||"[]");this.replayLog=t.map(function(t){return new r.Replay(t)})}var e=window.location.href.indexOf("?");this.currentReplay=e>0?this.replayConverter.stringToReplay(window.location.href.substring(e+1)):null}return t.prototype.pushReplay=function(t){this.currentReplay=t,window.history.replaceState("","",null!=t?"?"+(new n.ReplayConverter).replayToString(t):"");var e=this.replayLog.indexOf(t);return t&&e<0?(this.replayLog.push(t),localStorage.replayLog=JSON.stringify(this.replayLog.map(function(t){return t.moves})),this.replayLog.length-1):e},t.prototype.getLog=function(){return this.replayLog},t}();e.CurrentReplayProvider=i}),define("hotkeys",["require","exports"],function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e,r){this.key=t,this.text=e,this.callback=r}return t.prototype.toString=function(){return this.key+": "+this.text},t}();e.MenuOption=r;var n=function(){function t(t){var e=this;this.actions={},this.elements={},this.rootElement=t,this.initialize(t),window.addEventListener("keydown",function(t){return e.keyHandler(t)})}return t.prototype.setupButton=function(t,e,r){var n=t.toLowerCase();this.actions[n]=r,this.elements[n]&&(this.elements[n].textContent=e)},t.prototype.reset=function(){var t=this;Object.keys(this.elements).forEach(function(e){return t.elements[e].textContent=""}),this.actions={}},t.prototype.showMenu=function(t,e){var r=this,n=this.actions;this.actions={};var i=document.getElementById("menu"),s=this.rootElement.getElementsByClassName("tr");i.innerHTML="",i.classList.remove("hidden");for(var o=0;o<s.length;o++)s[o].classList.add("hidden");return new Promise(function(n){var s=document.createElement("div");s.classList.add("menuheader"),s.textContent=t,i.appendChild(s),e.forEach(function(t){var e=document.createElement("div");e.classList.add("menuitem"),e.textContent=t.key+": "+t.text,i.appendChild(e),r.actions[t.key.toLowerCase()]=function(){return n(t)}})}).then(function(t){r.actions=n,i.classList.add("hidden");for(var e=0;e<s.length;e++)s[e].classList.remove("hidden");return t.callback(),t})},t.prototype.keyHandler=function(t){var e=this.actions[t.key];t.repeat||void 0===e||e()},t.prototype.initialize=function(t){for(var e=0,r=[["Q","W","E","R","T","Y","U","I","O","P"],["A","S","D","F","G","H","J","K","L",";"],["Z","X","C","V","B","N","M",",",".","/"]];e<r.length;e++){var n=r[e];this.addRow(t,n)}},t.prototype.addRow=function(t,e){var r=document.createElement("div");r.classList.add("tr"),t.appendChild(r);for(var n=0,i=e;n<i.length;n++){var s=i[n];this.addButton(r,s,"")}},t.prototype.addButton=function(t,e,r){var n=document.createElement("div");n.classList.add("keybind"),n.textContent=e;var i=document.createElement("div");i.classList.add("buttontext"),i.textContent=r;var s=document.createElement("div");s.classList.add("movebutton"),s.classList.add("td"),s.appendChild(n),s.appendChild(i),t.appendChild(s),this.elements[e.toLowerCase()]=i},t}();e.Hotkeys=n}),define("standardControlScheme",["require","exports","turnable"],function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){}return t.prototype.register=function(t,e,n){var i=[["q","Z'",r.Turn.Zi],["w","B",r.Turn.B],["e","L'",r.Turn.Li],["r","I'",r.Turn.Ii],["y","X",r.Turn.X],["u","r",r.Turn.r],["i","R",r.Turn.R],["o","B'",r.Turn.Bi],["p","Z",r.Turn.Z],["a","Y'",r.Turn.Yi],["s","D",r.Turn.D],["d","L",r.Turn.L],["f","U'",r.Turn.Ui],["g","F'",r.Turn.Fi],["h","F",r.Turn.F],["j","U",r.Turn.U],["k","R'",r.Turn.Ri],["l","D'",r.Turn.Di],[";","Y",r.Turn.Y],["v","I",r.Turn.I],["n","X'",r.Turn.Xi],["m","r'",r.Turn.ri]];n&&t.setupButton("z","📹",n.resetCamera),i.forEach(function(r){t.setupButton(r[0],r[1],function(){return e.apply(r[2])})})},t.prototype.registerG1=function(t,e,n){var i=[["w","B2",r.Turn.B2],["e","L2",r.Turn.L2],["i","R2",r.Turn.R2],["o","B2'",r.Turn.B2],["a","Y'",r.Turn.Yi],["s","D",r.Turn.D],["d","L2",r.Turn.L2],["f","U'",r.Turn.Ui],["g","F2",r.Turn.F2],["h","F2",r.Turn.F2],["j","U",r.Turn.U],["l","D'",r.Turn.Di],[";","Y",r.Turn.Y],["k","R2",r.Turn.R2]];n&&t.setupButton("z","📹",n.resetCamera),i.forEach(function(r){t.setupButton(r[0],r[1],function(){return e.apply(r[2])})})},t}();e.StandardControlScheme=n}),define("timer",["require","exports"],function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t){this.interval=0,this.startTime=new Date,this.element=t||document.createElement("div"),this.element.innerHTML="&nbsp;",this.endTime=null}return t.prototype.start=function(){var t=this;0===this.interval&&(this.startTime=new Date,this.interval=window.setInterval(function(){return t.update()},16))},t.prototype.countdown=function(t){var e=this,r=this.startTime=new Date;return this.startTime.setTime(this.startTime.getTime()+t),new Promise(function(t){e.interval=window.setInterval(function(){e.update(),(new Date).getTime()>r.getTime()&&(e.stop(),t())},16)})},t.prototype.stop=function(){0!==this.interval&&(this.endTime=new Date,this.update(),window.clearInterval(this.interval),this.interval=0)},t.prototype.reset=function(){this.stop(),this.startTime=null,this.endTime=null,this.element.innerHTML="&nbsp;"},t.prototype.getTime=function(){return null!==this.startTime?(this.endTime||new Date).getTime()-this.startTime.getTime():0},t.prototype.isStarted=function(){return 0!==this.interval},t.prototype.update=function(){if(this.startTime){var t=(new Date).getTime()-this.startTime.getTime();this.element.innerHTML=this.displayDuration(t)}},t.prototype.displayDuration=function(t){if(t<0)return Math.floor(t/1e3).toString();var e=Math.floor(t/6e4),r=t%6e4/1e3;return(e>0?e+":"+(r<10?"0":""):"")+r.toFixed(2)},t}();e.Timer=r}),define("states/state",["require","exports"],function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r={enter:function(){},exit:function(){}},n=function(){function t(t){this.idleState=r,this.scramblerState=r,this.solveState=r,this.countdownState=r,this.practiceState=r,this.solvedState=r,this.replayState=r,this.logBrowserState=r,this.currentState=t||r,this.currentState.enter()}return t.prototype.setState=function(t){this.currentState.exit(),this.currentState=t,this.currentState.enter()},t}();e.StateContext=n}),define("states/countdownState",["require","exports","standardControlScheme","turnable"],function(t,e,r,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e,r,n){this.context=t,this.timer=e,this.hotkeys=r,this.cube=n,this.nextState=null}return t.prototype.enter=function(){var t=this,e=new s(this.cube,function(e){return t.onMove(e)});(new r.StandardControlScheme).register(this.hotkeys,e),this.hotkeys.setupButton("/","🎲",function(){return t.context.setState(t.context.scramblerState)}),this.timer.countdown(15e3).then(function(){t.context.setState(t.nextState||t.context.solveState)})},t.prototype.exit=function(){this.timer.reset(),this.hotkeys.reset()},t.prototype.setNextState=function(t){this.nextState=t},t.prototype.onMove=function(t){t||this.context.setState(this.nextState||this.context.solveState)},t}();e.CountdownState=i;var s=function(t){function e(e,r){var i=t.call(this,e)||this;return i.safeTurns=[n.Turn.X,n.Turn.Xi,n.Turn.Y,n.Turn.Yi,n.Turn.Z,n.Turn.Zi],i.callback=r,i}return __extends(e,t),e.prototype.apply=function(e){return this.callback(this.safeTurns.some(function(t){return t===e})),t.prototype.apply.call(this,e),this},e}(n.TurnableWrapper)}),define("states/idlestate",["require","exports","hotkeys"],function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e,r){this.context=t,this.hotkeys=e,this.replays=r}return t.prototype.enter=function(){var t=this,e=[new r.MenuOption("f","Timed solve",function(){return t.context.setState(t.context.scramblerState)}),new r.MenuOption("j","Practice",function(){return t.context.setState(t.context.practiceState)})];this.replays.getLog().length>0&&e.push(new r.MenuOption("k","Log",function(){return t.context.setState(t.context.logBrowserState)})),this.hotkeys.showMenu("Rubik's cube simulator.  Choose mode:",e)},t.prototype.exit=function(){},t}();e.IdleState=n}),define("states/logBrowserState",["require","exports","hotkeys"],function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e,r){this.context=t,this.replay=r,this.hotkeys=e,this.lastMenu=0}return t.prototype.enter=function(){0!==this.replay.getLog().length?this.showMenu(Math.min(this.lastMenu,this.replay.getLog().length-1)):this.context.setState(this.context.idleState)},t.prototype.exit=function(){this.hotkeys.reset()},t.prototype.showMenu=function(t){var e=this;this.lastMenu=t;var n=this.replay.getLog(),i=n[t].duration;this.hotkeys.showMenu(t+1+"/"+n.length+" - Solve ( "+i/1e3+" )",[new r.MenuOption("d","Back",function(){return e.showMenu((t-1+n.length)%n.length)}),new r.MenuOption("f","Next",function(){return e.showMenu((t+1)%n.length)}),new r.MenuOption("j","Replay",function(){return e.startReplay(t)}),new r.MenuOption("k","Cancel",function(){return e.context.setState(e.context.solvedState)})])},t.prototype.startReplay=function(t){this.replay.currentReplay=this.replay.getLog()[t],this.context.setState(this.context.replayState)},t}();e.LogBrowserState=n}),define("scrambler",["require","exports","turnable"],function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){}return t.prototype.scramble=function(t,e){for(var n=[[r.Turn.U,r.Turn.Ui,r.Turn.U2],[r.Turn.D,r.Turn.Di,r.Turn.D2],[r.Turn.L,r.Turn.Li,r.Turn.L2],[r.Turn.R,r.Turn.Ri,r.Turn.R2],[r.Turn.F,r.Turn.Fi,r.Turn.F2],[r.Turn.B,r.Turn.Bi,r.Turn.B2]],i=0;i<e;i++){var s=Math.floor(Math.random()*(n.length-1)),o=n[s];n.splice(s,1),t.apply(o[Math.floor(Math.random()*o.length)]),n.push(o)}},t}();e.Scrambler=n}),define("states/practiceState",["require","exports","scrambler","standardControlScheme"],function(t,e,r,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e,r){this.cube=t,this.hotkeys=e,this.camera=r}return t.prototype.enter=function(){var t=this;(new n.StandardControlScheme).register(this.hotkeys,this.cube,this.camera),this.hotkeys.setupButton("/","🎲",function(){t.hotkeys.reset(),(new r.Scrambler).scramble(t.cube,30),t.cube.waitForMoves().then(function(){return t.enter()})})},t.prototype.exit=function(){},t}();e.PracticeState=i}),define("states/replayStartState",["require","exports","hotkeys"],function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e,r){this.context=t,this.log=e,this.keys=r}return t.prototype.enter=function(){var t=this;if(null!==this.log.currentReplay){var e=this.log.currentReplay.duration;this.keys.showMenu("Solved in "+e/1e3+" seconds.",[new r.MenuOption("f","Replay",function(){return t.context.setState(t.context.replayState)}),new r.MenuOption("j","Cancel",function(){return t.context.setState(t.context.idleState)})])}else this.context.setState(this.context.idleState)},t.prototype.exit=function(){},t}();e.ReplayStartState=n}),define("states/replayState",["require","exports","timer","turnable"],function(t,e,r,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e,r,n){this.context=t,this.target=e,this.replay=r,this.displayTimer=n}return t.prototype.enter=function(){this.displayTimer.reset(),this.start()},t.prototype.exit=function(){},t.prototype.start=function(){var t=this;if(null!==this.replay.currentReplay){for(var e,i=this.replay.currentReplay,s=new r.Timer,o=!1,a=0;a<i.moves.length&&0===i.moves[a].timestamp;)this.target.apply(i.moves[a].turn),a++;e=function(){for(;a<i.moves.length&&i.moves[a].timestamp<s.getTime();){var r=i.moves[a];r.turn>n.Turn.Z2&&!o&&(o=!0,t.displayTimer.reset(),t.displayTimer.start()),t.target.apply(r.turn),a++}a>=i.moves.length?t.target.waitForMoves().then(function(){t.displayTimer.stop(),t.context.setState(t.context.solvedState)}):setTimeout(e,100)},this.target.waitForMoves().then(function(){t.displayTimer.countdown(15e3),s.start(),e()})}else this.context.setState(this.context.idleState)},t}();e.ReplayState=i}),define("turnRecorder",["require","exports","replay","timer","turnable"],function(t,e,r,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=function(t){function e(e,r){var i=t.call(this,e)||this;return i.timer=new n.Timer,i.stopTime=null,i.moves=r||[],i}return __extends(e,t),e.prototype.apply=function(e){return this.moves.push({timestamp:this.timer.getTime(),turn:e}),t.prototype.apply.call(this,e),this},e.prototype.reset=function(){this.moves=[],this.timer.reset()},e.prototype.start=function(){this.timer.start()},e.prototype.stop=function(){this.stopTime=this.stopTime||this.timer.getTime()},e.prototype.getReplay=function(){return new r.Replay(this.moves)},e}(i.TurnableWrapper);e.TurnRecorder=s}),define("states/scramblingState",["require","exports","scrambler"],function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e,n,i,s){this.context=t,this.cube=e,this.recorder=n,this.timer=i,this.scrambler=new r.Scrambler,this.nextState=null,this.state=s}return t.prototype.enter=function(){var t=this;this.state.isSolved()||this.state.reset(),this.timer.reset(),this.recorder.reset(),this.scrambler.scramble(this.cube,30),this.recorder.start(),this.cube.waitForMoves().then(function(){t.context.setState(t.nextState||t.context.countdownState),t.nextState=null})},t.prototype.exit=function(){},t.prototype.setNextState=function(t){this.nextState=t},t}();e.ScramblingState=n}),define("states/solvedState",["require","exports","hotkeys"],function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e,r){this.context=t,this.hotkeys=e,this.replay=r}return t.prototype.enter=function(){var t=this,e=[new r.MenuOption("f","Scramble",function(){return t.context.setState(t.context.scramblerState)}),new r.MenuOption("j","Replay",function(){t.context.setState(t.context.replayState)})];this.replay.getLog().length>1&&e.push(new r.MenuOption("k","Log",function(){return t.context.setState(t.context.logBrowserState)})),this.hotkeys.showMenu("Solved!",e)},t.prototype.exit=function(){this.hotkeys.reset()},t}();e.SolvedState=n}),define("states/timedSolveState",["require","exports","standardControlScheme","turnable"],function(t,e,r,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e,r,n,i,s,o,a){this.context=t,this.cube=e,this.hotkeys=r,this.camera=n,this.timer=i,this.cubeState=s,this.recorder=o,this.replayLog=a,this.active=!1}return t.prototype.enter=function(){var t=this,e=this.cube,n=this.camera,i=new s(e,function(){return t.onTurnCompleted()});(new r.StandardControlScheme).register(this.hotkeys,i,n),this.hotkeys.setupButton("/","🎲",function(){t.timer.reset(),t.context.setState(t.context.scramblerState)}),this.timer.start(),this.active=!0},t.prototype.exit=function(){this.active=!1,this.hotkeys.reset()},t.prototype.onTurnCompleted=function(){this.active&&this.cubeState.isSolved()&&(this.timer.stop(),this.recorder.stop(),this.replayLog.pushReplay(this.recorder.getReplay()),this.context.setState(this.context.solvedState))},t}();e.TimedSolveState=i;var s=function(t){function e(e,r){var n=t.call(this,e)||this;return n.callback=r,n}return __extends(e,t),e.prototype.apply=function(e){var r=this;return t.prototype.apply.call(this,e),t.prototype.waitForMoves.call(this).then(function(){return r.callback()}),this},e}(n.TurnableWrapper)}),define("app",["require","exports","cube","currentReplayProvider","hotkeys","states/countdownState","states/idlestate","states/logBrowserState","states/practiceState","states/replayStartState","states/replayState","states/scramblingState","states/solvedState","states/state","states/timedSolveState","timer","turnable","turnRecorder"],function(t,e,r,n,i,s,o,a,u,c,p,h,l,f,y,d,T,v){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var m=function(){function t(){}return t.prototype.run=function(){var t=new r.Cube,e=new CubeRenderer(t),T=new i.Hotkeys(document.getElementById("buttons")),m=new d.Timer(document.getElementById("timerDisplay")),S=new f.StateContext,g=new v.TurnRecorder(e),w=new n.CurrentReplayProvider;return this.implementEnums(t),this.implementApply(e),S.idleState=new o.IdleState(S,T,w),S.scramblerState=new h.ScramblingState(S,g,g,m,t),S.countdownState=new s.CountdownState(S,m,T,g),S.practiceState=new u.PracticeState(e,T,e),S.solvedState=new l.SolvedState(S,T,w),S.replayState=new p.ReplayState(S,e,w,m),S.logBrowserState=new a.LogBrowserState(S,T,w),S.solveState=new y.TimedSolveState(S,g,T,e,m,t,g,w),w.currentReplay?S.setState(new c.ReplayStartState(S,w,T)):S.setState(S.idleState),0},t.prototype.implementEnums=function(t){for(var e=function(e){var r=e,n=T.Turn[r];void 0===t[n]&&(t[n]=function(){return t.apply(r)})},r=T.Turn.X;r<=T.Turn.ri;r++)e(r)},t.prototype.implementApply=function(t){t.apply=function(e){return t[T.Turn[e]](),t}},t}();e.App=m,(new m).run()});
//# sourceMappingURL=app.min.js.map